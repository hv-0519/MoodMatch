{% extends 'admin/admin_base.html' %}

{% block sidebar_class %}static-expanded{% endblock %}

{% block admin_styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}" />
{% endblock %}

{% block admin_content %}

<!-- Main Content Area -->
<div class="admin-dashboard-wrapper with-static-sidebar">
  <div class="admin-header-us">
    <div class="admin-header-content">
      <div class="admin-title-section">
        <h1>Manage Users</h1>
        <p class="admin-subtitle">
          Welcome back <b style="color:white;">"{{ admins|capitalize }}"</b> ! Here's an overview of all registered
          users.
        </p>
      </div>
    </div>
  </div>

  <!-- Horizontal Card Grid -->
  {% if users %}
  <div class="users-grid">
    {% for user in users %}
    <div class="user-card">
      <div class="avatar-wrapper">
        {% if user['profile_picture'] %}
        <img src="{{ url_for('static', filename='uploads/' ~ user['profile_picture']) }}"
          alt="{{ user['first_name'] or user['username'] or 'User' }}">
        {% else %}
        <div
          style="width:100%; height:100%; background:linear-gradient(135deg, #8ec5fc 0%, #e0c3fc 100%); color:white; font-size:3.5rem; font-weight:bold; display:flex; align-items:center; justify-content:center;">
          {{ (user['first_name'][:1] + user['last_name'][:1]) | upper | default('U') }}
        </div>
        {% endif %}
      </div>

      <div class="user-name">
        {{ user['first_name'] or '' }} {{ user['last_name'] or '' }}
        {% if not user['first_name'] and not user['last_name'] %}
        {{ user['username'] or 'Unknown User' }}
        {% endif %}
      </div>

      <div class="user-username">
        @{{ user['username'] or 'n/a' }}
      </div>

      <div class="action-buttons">
        <button class="btn btn-view" onclick="viewUser({{ user['id'] | e }})">View</button>
        <button class="btn btn-edit" onclick="editUser({{ user['id'] | e }})">Edit</button>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="no-users">
    <h2>No users found</h2>
    <p>There are currently no registered users in the system.</p>
  </div>
  {% endif %}
</div>
{% endblock %}