{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/user.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/activities.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock %}

{% block content %}
<!-- User Sidebar -->
<aside class="user-sidebar">
  <div class="user-sidebar-profile">
    <div class="user-profile-badge-circle">
      <i class="fas fa-user"></i>
    </div>
    <div class="user-profile-role-pill">Premium Member</div>
    <div class="user-profile-email-small">user@moodmatch.app</div>
  </div>

  <nav class="user-sidebar-nav">
    <div class="user-nav-section">
      <div class="user-nav-label">Main</div>
      <ul class="user-nav-list">
        <li class="user-nav-item">
          <a href="{{ url_for('user.user_dashboard') }}" class="user-nav-link">
            <i class="fas fa-home user-nav-icon"></i>
            <span class="user-nav-text">Dashboard</span>
          </a>
        </li>
        <li class="user-nav-item">
          <a href="{{ url_for('main.favorites') }}" class="user-nav-link">
            <i class="fas fa-heart user-nav-icon"></i>
            <span class="user-nav-text">My Favorites</span>
          </a>
        </li>
        <li class="user-nav-item">
          <a href="{{ url_for('main.history') }}" class="user-nav-link">
            <i class="fas fa-history user-nav-icon"></i>
            <span class="user-nav-text">History</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="user-nav-section">
      <div class="user-nav-label">Activities</div>
      <ul class="user-nav-list">
        <li class="user-nav-item">
          <a href="{{ url_for('activities.writing_editor') }}" class="user-nav-link active">
            <i class="fas fa-pen user-nav-icon"></i>
            <span class="user-nav-text">Writing</span>
          </a>
        </li>
        <li class="user-nav-item">
          <a href="{{ url_for('activities.reading_resources') }}" class="user-nav-link">
            <i class="fas fa-book user-nav-icon"></i>
            <span class="user-nav-text">Reading</span>
          </a>
        </li>
        <li class="user-nav-item">
          <a href="{{ url_for('activities.cooking_steps') }}" class="user-nav-link">
            <i class="fas fa-utensils user-nav-icon"></i>
            <span class="user-nav-text">Cooking</span>
          </a>
        </li>
        <li class="user-nav-item">
          <a href="{{ url_for('activities.games_details') }}" class="user-nav-link">
            <i class="fas fa-gamepad user-nav-icon"></i>
            <span class="user-nav-text">Games & Sports</span>
          </a>
        </li>
        <li class="user-nav-item">
          <a href="{{ url_for('activities.travel_places') }}" class="user-nav-link">
            <i class="fas fa-plane user-nav-icon"></i>
            <span class="user-nav-text">Travel</span>
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="user-sidebar-footer">
    <a href="{{ url_for('auth.logout') }}" class="user-logout-btn">
      <i class="fas fa-sign-out-alt"></i>
      <span>Logout</span>
    </a>
  </div>
</aside>

<!-- Main Content -->
<div class="user-dashboard-wrapper">
  <!-- Page Header -->
  <div class="activity-page-header">
    <div class="activity-header-content">
      <div class="activity-title-section">
        <h1>✍️ Writing Studio</h1>
        <p class="activity-subtitle">Express your thoughts, capture your ideas, and unleash your creativity</p>
      </div>
      <div class="activity-header-actions">
        <a href="{{ url_for('user.user_dashboard') }}" class="activity-btn activity-btn-outline">
          <i class="fas fa-arrow-left"></i>
          <span>Back to Dashboard</span>
        </a>
      </div>
    </div>
  </div>

  <!-- Editor Container -->
  <div class="editor-container">
    <form action="{{ url_for('activities.save_writing') }}" method="POST" class="editor-form">
      <div class="form-group-editor">
        <label for="writing-title" class="editor-label">
          <i class="fas fa-heading"></i>
          Title
        </label>
        <input 
          type="text" 
          id="writing-title" 
          name="title" 
          class="editor-input" 
          placeholder="Give your writing a compelling title..."
          required
        >
      </div>

      <div class="form-group-editor">
        <label for="writing-content" class="editor-label">
          <i class="fas fa-edit"></i>
          Your Story
        </label>
        <textarea 
          id="writing-content" 
          name="content" 
          class="editor-textarea" 
          placeholder="Start writing your thoughts, stories, or ideas here..."
          required
        ></textarea>
      </div>

      <div class="editor-actions">
        <button type="submit" class="activity-btn activity-btn-primary">
          <i class="fas fa-save"></i>
          <span>Save Writing</span>
        </button>
        <button type="button" class="activity-btn activity-btn-outline">
          <i class="fas fa-eye"></i>
          <span>Preview</span>
        </button>
        <button type="reset" class="activity-btn activity-btn-danger">
          <i class="fas fa-trash"></i>
          <span>Clear</span>
        </button>
      </div>
    </form>
  </div>

  <!-- Previous Writings -->
  <div class="writings-list-section">
    <div class="section-header">
      <h2 class="section-title">Your Previous Writings</h2>
    </div>
    <div class="writings-grid">
      <!-- Writing Card 1 -->
      <div class="writing-card">
        <div class="writing-card-header">
          <h3 class="writing-title">Morning Reflections</h3>
        </div>
        <p class="writing-preview">
          The sunrise painted the sky in shades of amber and rose, reminding me that every day brings new possibilities. Today I choose gratitude...
        </p>
        <div class="writing-meta">
          <span><i class="fas fa-calendar"></i> Jan 20, 2026</span>
          <span><i class="fas fa-pencil-alt"></i> 324 words</span>
        </div>
      </div>

      <!-- Writing Card 2 -->
      <div class="writing-card">
        <div class="writing-card-header">
          <h3 class="writing-title">Journey Through Time</h3>
        </div>
        <p class="writing-preview">
          Time is a curious thing. It moves forward relentlessly, yet in our memories, we can revisit moments that shaped who we are...
        </p>
        <div class="writing-meta">
          <span><i class="fas fa-calendar"></i> Jan 18, 2026</span>
          <span><i class="fas fa-pencil-alt"></i> 512 words</span>
        </div>
      </div>

      <!-- Writing Card 3 -->
      <div class="writing-card">
        <div class="writing-card-header">
          <h3 class="writing-title">The Art of Stillness</h3>
        </div>
        <p class="writing-preview">
          In a world that never stops moving, I've discovered the profound beauty of simply being still. No agenda, no rushing...
        </p>
        <div class="writing-meta">
          <span><i class="fas fa-calendar"></i> Jan 15, 2026</span>
          <span><i class="fas fa-pencil-alt"></i> 287 words</span>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const textarea = document.querySelector('.editor-textarea');
    const wordCountDisplay = document.createElement('div');
    wordCountDisplay.style.cssText = 'text-align: right; color: var(--user-text-muted); font-size: 0.875rem; margin-top: 8px;';
    textarea.parentElement.appendChild(wordCountDisplay);

    function updateWordCount() {
      const text = textarea.value.trim();
      const words = text ? text.split(/\s+/).length : 0;
      const chars = text.length;
      wordCountDisplay.textContent = `${words} words • ${chars} characters`;
    }

    textarea.addEventListener('input', updateWordCount);
    updateWordCount();
  });
</script>
{% endblock %}