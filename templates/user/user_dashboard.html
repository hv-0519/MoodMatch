{% extends 'base.html' %} {% block head %}
<!-- User Dashboard Specific CSS -->
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/user.css') }}"
/>
{% endblock %} {% block content %}

<!-- User Sidebar - Below Navbar, Always Visible -->
<aside class="user-sidebar">
  <!-- Sidebar Profile -->
  <div class="user-sidebar-profile">
    <div class="user-profile-avatar">
      {% if current_user.is_authenticated and current_user.profile_picture %}
      <img
        src="{{ url_for('static', filename='uploads/' ~ current_user.profile_picture) }}"
        alt="Profile"
      />
      {% elif current_user.is_authenticated %} {{
      current_user.username[0:2].upper() }} {% else %} U {% endif %}
    </div>
    <div class="user-profile-name">
      {% if current_user.is_authenticated %} {{ current_user.username }} {% else
      %} Guest User {% endif %}
    </div>
    <div class="user-profile-email">
      {% if current_user.is_authenticated and current_user.email %} {{
      current_user.email }} {% else %} user@example.com {% endif %}
    </div>
  </div>

  <!-- Sidebar Navigation -->
  <nav class="user-sidebar-nav">
    <!-- Main Menu -->
    <div class="user-nav-section">
      <div class="user-nav-label">Main Menu</div>
      <ul class="user-nav-list">
        <li class="user-nav-item">
          <a
            href="{{ url_for('user.user_dashboard') }}"
            class="user-nav-link active"
          >
            <span class="user-nav-icon">ğŸ“Š</span>
            <span class="user-nav-text">Dashboard</span>
          </a>
        </li>
        <li class="user-nav-item">
          <a
            href="{{ url_for('main.index') }}#mood-selector"
            class="user-nav-link"
          >
            <span class="user-nav-icon">ğŸ¨</span>
            <span class="user-nav-text">Find Activities</span>
          </a>
        </li>
        <li class="user-nav-item">
          <a href="{{ url_for('main.favorites') }}" class="user-nav-link">
            <span class="user-nav-icon">â¤ï¸</span>
            <span class="user-nav-text">My Favorites</span>
            <span class="user-nav-badge">43</span>
          </a>
        </li>
        <li class="user-nav-item">
          <a href="{{ url_for('main.history') }}" class="user-nav-link">
            <span class="user-nav-icon">ğŸ“š</span>
            <span class="user-nav-text">Activity History</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Account Menu -->
    <div class="user-nav-section">
      <div class="user-nav-label">Account</div>
      <ul class="user-nav-list">
        <li class="user-nav-item">
          <a href="#" class="user-nav-link">
            <span class="user-nav-icon">ğŸ‘¤</span>
            <span class="user-nav-text">My Profile</span>
          </a>
        </li>
        <li class="user-nav-item">
          <a href="{{ url_for('main.about') }}" class="user-nav-link">
            <span class="user-nav-icon">â„¹ï¸</span>
            <span class="user-nav-text">About</span>
          </a>
        </li>
        <li class="user-nav-item">
          <a href="#" class="user-nav-link">
            <span class="user-nav-icon">âš™ï¸</span>
            <span class="user-nav-text">Settings</span>
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Sidebar Footer -->
  <div class="user-sidebar-footer">
    <a href="{{ url_for('auth.logout') }}" class="user-logout-btn">
      <span>ğŸšª</span>
      <span>Logout</span>
    </a>
  </div>
</aside>

<!-- Main Content Area -->
<div class="user-dashboard-wrapper">
  <!-- User Header (matched to admin style, removed badge and transparency) -->
  <div class="user-header">
    <div class="user-header-content">
      <div class="user-title-section">
        <h1>User Dashboard</h1>
        <p class="user-subtitle">
          Welcome back! Here's what's happening with your activities today.
        </p>
      </div>
      <div class="user-header-actions">
        <button class="user-btn user-btn-white">
          <span>ğŸ“Š</span>
          <span>Generate Report</span>
        </button>
        <button class="user-btn user-btn-outline">
          <span>âš™ï¸</span>
          <span>Settings</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Content -->
  <div class="user-content">
    <!-- Stats Cards (matched to admin structure and colors from image) -->
    <div class="user-stats-grid">
      <div class="user-stat-card red">
        <div class="user-stat-header">
          <div class="user-stat-info">
            <div class="user-stat-label">Activities Tried</div>
            <div class="user-stat-value">127</div>
          </div>
          <div class="user-stat-icon">ğŸ¯</div>
        </div>
        <div class="user-stat-footer">
          <span class="user-stat-trend up">â†‘ 12%</span>
          <span>vs last month</span>
        </div>
      </div>

      <div class="user-stat-card orange">
        <div class="user-stat-header">
          <div class="user-stat-info">
            <div class="user-stat-label">Favorites</div>
            <div class="user-stat-value">43</div>
          </div>
          <div class="user-stat-icon">â¤ï¸</div>
        </div>
        <div class="user-stat-footer">
          <span class="user-stat-trend up">â†‘ 8%</span>
          <span>vs last month</span>
        </div>
      </div>

      <div class="user-stat-card purple">
        <div class="user-stat-header">
          <div class="user-stat-info">
            <div class="user-stat-label">Match Rate</div>
            <div class="user-stat-value">89%</div>
          </div>
          <div class="user-stat-icon">ğŸ†</div>
        </div>
        <div class="user-stat-footer">
          <span class="user-stat-trend up">â†‘ 3.2%</span>
          <span>vs last month</span>
        </div>
      </div>

      <div class="user-stat-card green">
        <div class="user-stat-header">
          <div class="user-stat-info">
            <div class="user-stat-label">Avg Rating</div>
            <div class="user-stat-value">4.8</div>
          </div>
          <div class="user-stat-icon">â­</div>
        </div>
        <div class="user-stat-footer">
          <span class="user-stat-trend down">â†“ 2%</span>
          <span>vs yesterday</span>
        </div>
      </div>
    </div>

    <!-- Main Content Grid (added to match admin's chart + activity layout, removed quick actions) -->
    <div class="user-content-grid">
      <!-- Chart Card (added placeholder to match admin) -->
      <div class="user-chart-card">
        <div class="user-card-header">
          <h2 class="user-card-title">Activity Growth</h2>
          <div class="user-card-actions">
            <button class="user-filter-btn active">7 Days</button>
            <button class="user-filter-btn">30 Days</button>
            <button class="user-filter-btn">90 Days</button>
          </div>
        </div>
        <div class="user-chart-placeholder">
          <div class="user-chart-placeholder-content">
            <div class="user-chart-placeholder-icon">ğŸ“Š</div>
            <p>Chart visualization area</p>
          </div>
        </div>
      </div>

      <!-- Recent Activity (updated to match admin with avatars) -->
      <div class="user-activity-card">
        <div class="user-card-header">
          <h2 class="user-card-title">Recent Activity</h2>
        </div>
        <div class="user-activity-list">
          <div class="user-activity-item">
            <div class="user-activity-avatar">JD</div>
            <div class="user-activity-content">
              <div class="user-activity-text">
                <strong>Watercolor Painting</strong> completed
              </div>
              <div class="user-activity-time">2 hours ago</div>
            </div>
          </div>
          <div class="user-activity-item">
            <div class="user-activity-avatar">SM</div>
            <div class="user-activity-content">
              <div class="user-activity-text">
                <strong>Morning Jog</strong> added to favorites
              </div>
              <div class="user-activity-time">Yesterday</div>
            </div>
          </div>
          <div class="user-activity-item">
            <div class="user-activity-avatar">RJ</div>
            <div class="user-activity-content">
              <div class="user-activity-text">
                <strong>Reading Fiction</strong> rated 4.5
              </div>
              <div class="user-activity-time">2 days ago</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Favorites Table (added to match admin's table, adapted for user context) -->
    <div class="user-table-card">
      <div class="user-table-header">
        <h2 class="user-card-title">Recent Favorites</h2>
        <div class="user-search-box">
          <input
            type="text"
            class="user-search-input"
            placeholder="Search favorites..."
          />
          <span class="user-search-icon">ğŸ”</span>
        </div>
      </div>

      <div class="user-table-wrapper">
        <table class="user-table">
          <thead>
            <tr>
              <th>Activity</th>
              <th>Category</th>
              <th>Rating</th>
              <th>Added</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <div style="display: flex; align-items: center; gap: 10px">
                  <div
                    class="user-activity-avatar"
                    style="width: 32px; height: 32px; font-size: 0.75rem"
                  >
                    WP
                  </div>
                  <strong>Watercolor Painting</strong>
                </div>
              </td>
              <td>Creative</td>
              <td><span class="user-badge success">4.8</span></td>
              <td>Jan 15, 2026</td>
              <td>
                <div class="user-table-actions">
                  <button class="user-icon-btn" title="View">ğŸ‘ï¸</button>
                  <button class="user-icon-btn" title="Remove">ğŸ—‘ï¸</button>
                </div>
              </td>
            </tr>
            <!-- Add more rows as needed -->
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

{% endblock %} {% block scripts %}
<script>
  // User Dashboard JavaScript (updated to match admin JS)
  document.addEventListener("DOMContentLoaded", function () {
    // Filter buttons
    const filterBtns = document.querySelectorAll(".user-filter-btn");
    filterBtns.forEach((btn) => {
      btn.addEventListener("click", function () {
        filterBtns.forEach((b) => b.classList.remove("active"));
        this.classList.add("active");
        console.log("Filter changed to:", this.textContent);
      });
    });

    // Search functionality
    const searchInput = document.querySelector(".user-search-input");
    if (searchInput) {
      searchInput.addEventListener("input", function (e) {
        const searchTerm = e.target.value.toLowerCase();
        const tableRows = document.querySelectorAll(".user-table tbody tr");

        tableRows.forEach((row) => {
          const text = row.textContent.toLowerCase();
          row.style.display = text.includes(searchTerm) ? "" : "none";
        });
      });
    }

    // Action buttons
    const actionBtns = document.querySelectorAll(".user-icon-btn");
    actionBtns.forEach((btn) => {
      btn.addEventListener("click", function (e) {
        e.preventDefault();
        const action = this.getAttribute("title");
        console.log("Action:", action);
        // Add your action handlers here
      });
    });
  });
</script>
{% endblock %}
